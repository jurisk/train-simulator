= Useful Commands

== CI/CD Status

image::https://github.com/jurisk/train-simulator/actions/workflows/rust.yml/badge.svg[Rust,link=https://github.com/jurisk/train-simulator/actions/workflows/rust.yml]

https://jurisk.github.io/train-simulator-pages/[Online version]

== Useful commands

=== Housekeeping

Rare:

[source,bash]
----
rustup update
cargo +nightly update
cargo +nightly udeps --all-targets
cargo +nightly audit
----

Frequent:

[source,bash]
----
cargo fmt
cargo clippy -- -W clippy::pedantic -W clippy::style -W clippy::unwrap_used -W clippy::expect_used
----

=== Running

[source,bash]
----
cargo run --features bevy/dynamic_linking
----

=== Prerequisites

On macOS:

[source,bash]
----
brew install llvm
----

From https://bevyengine.org/learn/quick-start/getting-started/setup/#enable-fast-compiles-optional[Enable Fast Compiles]:

[source,bash]
----
cargo install -f cargo-binutils
rustup component add llvm-tools-preview
----

From https://github.com/bevyengine/bevy/tree/main/examples#wasm[WASM examples]:

[source,bash]
----
rustup target add wasm32-unknown-unknown
cargo install wasm-bindgen-cli
----

=== WASM build

[source,bash]
----
cargo build --profile wasm-release --target wasm32-unknown-unknown
wasm-bindgen --out-name train-simulator-client --out-dir client/web/wasm-build --target web target/wasm32-unknown-unknown/wasm-release/train-simulator-client.wasm
----